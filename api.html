<!DOCTYPE html>
<html>
  <head>
    <title>W3.CSS Template</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body class="w3-black">
    <!-- Icon Bar (Sidebar - hidden on small screens) -->
    <nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
      <!-- Avatar image in top left corner -->
      <img src="./assets/profilesvg.svg" style="width: 100%" />
      <a
        href="./index.html"
        class="w3-bar-item w3-button w3-padding-large w3-black"
      >
        <i class="fa fa-home w3-xxlarge"></i>
        <p>HOME</p>
      </a>
      <a
        href="./index.html#about"
        class="w3-bar-item w3-button w3-padding-large w3-hover-black"
      >
        <i class="fa fa-user w3-xxlarge"></i>
        <p>ABOUT</p>
      </a>
      <a
        href="./java.html"
        class="w3-bar-item w3-button w3-padding-large w3-hover-black"
      >
        <i class="fa fa-code w3-xxlarge"></i>
        <p>JAVA</p>
      </a>
      <a
        href="./api.html"
        class="w3-bar-item w3-button w3-padding-large w3-hover-black"
      >
        <i class="fa fa-cogs w3-xxlarge"></i>
        <p>API</p>
      </a>
      <a
        href="./index.html#contact"
        class="w3-bar-item w3-button w3-padding-large w3-hover-black"
      >
        <i class="fa fa-envelope w3-xxlarge"></i>
        <p>CONTACT</p>
      </a>
    </nav>
    <!-- Navbar on small screens (Hidden on medium and large screens) -->
    <div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
      <div
        class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small"
      >
        <a
          href="./index.html"
          class="w3-bar-item w3-button"
          style="width: 20% !important"
          >HOME</a
        >
        <a
          href="./index.html#about"
          class="w3-bar-item w3-button"
          style="width: 20% !important"
          >ABOUT</a
        >
        <a
          href="./java.html"
          class="w3-bar-item w3-button"
          style="width: 20% !important"
          >JAVA</a
        >
        <a
          href="./api.html"
          class="w3-bar-item w3-button"
          style="width: 20% !important"
          >API
        </a>
        <a
          href="./index.html#contact"
          class="w3-bar-item w3-button"
          style="width: 20% !important"
          >CONTACT</a
        >
      </div>
    </div>
    <div class="w3-padding-large" id="main">
      <h1>API</h1>
      <hr />
      <div>
        <h3>Jokes</h3>
        <p id="joke">Jokes here ...</p>
        <button onclick="api()">EiEi</button>
        <hr />
      </div>
      <div>
        <h3>Randoms Photos</h3>
        <p id="randomPhoto" style="width: 50px"></p>
        <button onclick="apiRandom()">Random Photo here ...</button>
        <hr />
      </div>
      <div>
        <h3>Randoms Photos</h3>
        <div class="container">
          <p>แปลงสกุลเงิน</p>
          <div class="rate" id="rate">Conversion Rate :</div>
          <div class="currency">
            <select name="" id="currency-one">
              <option value="AED">AED</option>
              <option value="ARS">ARS</option>
              <option value="AUD">AUD</option>
              <option value="BGN">BGN</option>
              <option value="BRL">BRL</option>
              <option value="BSD">BSD</option>
              <option value="CAD">CAD</option>
              <option value="CHF">CHF</option>
              <option value="CLP">CLP</option>
              <option value="CNY">CNY</option>
              <option value="COP">COP</option>
              <option value="CZK">CZK</option>
              <option value="DKK">DKK</option>
              <option value="DOP">DOP</option>
              <option value="EGP">EGP</option>
              <option value="EUR">EUR</option>
              <option value="FJD">FJD</option>
              <option value="GBP">GBP</option>
              <option value="GTQ">GTQ</option>
              <option value="HKD">HKD</option>
              <option value="HRK">HRK</option>
              <option value="HUF">HUF</option>
              <option value="IDR">IDR</option>
              <option value="ILS">ILS</option>
              <option value="INR">INR</option>
              <option value="ISK">ISK</option>
              <option value="JPY">JPY</option>
              <option value="KRW">KRW</option>
              <option value="KZT">KZT</option>
              <option value="MXN">MXN</option>
              <option value="MYR">MYR</option>
              <option value="NOK">NOK</option>
              <option value="NZD">NZD</option>
              <option value="PAB">PAB</option>
              <option value="PEN">PEN</option>
              <option value="PHP">PHP</option>
              <option value="PKR">PKR</option>
              <option value="PLN">PLN</option>
              <option value="PYG">PYG</option>
              <option value="RON">RON</option>
              <option value="RUB">RUB</option>
              <option value="SAR">SAR</option>
              <option value="SEK">SEK</option>
              <option value="SGD">SGD</option>
              <option value="THB" selected="">THB</option>
              <option value="TRY">TRY</option>
              <option value="TWD">TWD</option>
              <option value="UAH">UAH</option>
              <option value="USD">USD</option>
              <option value="UYU">UYU</option>
              <option value="VND">VND</option>
              <option value="ZAR">ZAR</option>
            </select>
            <input
              type="number"
              id="conversion-amount"
              placeholder="Enter amount"
            /><span> To </span>
            <div class="currency">
              <select name="" id="currency-two">
                <option value="AED">AED</option>
                <option value="ARS">ARS</option>
                <option value="AUD">AUD</option>
                <option value="BGN">BGN</option>
                <option value="BRL">BRL</option>
                <option value="BSD">BSD</option>
                <option value="CAD">CAD</option>
                <option value="CHF">CHF</option>
                <option value="CLP">CLP</option>
                <option value="CNY">CNY</option>
                <option value="COP">COP</option>
                <option value="CZK">CZK</option>
                <option value="DKK">DKK</option>
                <option value="DOP">DOP</option>
                <option value="EGP">EGP</option>
                <option value="EUR">EUR</option>
                <option value="FJD">FJD</option>
                <option value="GBP">GBP</option>
                <option value="GTQ">GTQ</option>
                <option value="HKD">HKD</option>
                <option value="HRK">HRK</option>
                <option value="HUF">HUF</option>
                <option value="IDR">IDR</option>
                <option value="ILS">ILS</option>
                <option value="INR">INR</option>
                <option value="ISK">ISK</option>
                <option value="JPY">JPY</option>
                <option value="KRW">KRW</option>
                <option value="KZT">KZT</option>
                <option value="MXN">MXN</option>
                <option value="MYR">MYR</option>
                <option value="NOK">NOK</option>
                <option value="NZD">NZD</option>
                <option value="PAB">PAB</option>
                <option value="PEN">PEN</option>
                <option value="PHP">PHP</option>
                <option value="PKR">PKR</option>
                <option value="PLN">PLN</option>
                <option value="PYG">PYG</option>
                <option value="RON">RON</option>
                <option value="RUB">RUB</option>
                <option value="SAR">SAR</option>
                <option value="SEK">SEK</option>
                <option value="SGD">SGD</option>
                <option value="THB">THB</option>
                <option value="TRY">TRY</option>
                <option value="TWD">TWD</option>
                <option value="UAH">UAH</option>
                <option value="USD" selected="">USD</option>
                <option value="UYU">UYU</option>
                <option value="VND">VND</option>
                <option value="ZAR">ZAR</option>
              </select>
            </div>
          </div>
        </div>
        <button onclick="convertCurrency()">Convert</button>
      </div>
      <hr />
      <div>
        <h1>Coinbase Exchange Rates for Bitcoin (BTC)</h1>
        <div id="cryptoRates"></div>
      </div>
      <hr />
      <div>
        <h3>API Google Sheet</h3>
        <form
          id="NewTopic"
          method="POST"
          action="https://script.google.com/macros/s/AKfycbzwTWQgokm_Li0rqeF_X1jLJOcAgzLz22Z8T9FiTuAv3xhqEsP0CUVTNYg7Qx9-TfL1/exec"
        >
          <input name="Email" type="email" placeholder="Email" required="" />
          <input name="Name" type="text" placeholder="Name" required="" />
          <input name="Topic" type="text" placeholder="Topic" required="" />
          <button type="button" onclick="submitForm()">Send</button>
        </form>
        <div id="demo"></div>
        <hr/>
        <iframe
          src="https://docs.google.com/spreadsheets/d/e/2PACX-1vS0kQFPIlGg3yhnRtY497XWGaTnJC36vLI0L5WFKQ7tutKBHQQeNVNHwjwbuV_qPS4JyMjMMWf7fnzv/pubhtml?gid=0&amp;single=true&amp;widget=true&amp;headers=false"
        ></iframe>
      </div>
    </div>

    <script>
      function api() {
        fetch("https://official-joke-api.appspot.com/random_joke")
          .then((response) => response.json())
          .then((data) => {
            const jokeElement = document.getElementById("joke");
            jokeElement.innerHTML = `<p>${data.setup}</p>`;
            setTimeout(() => {
              jokeElement.innerHTML += `<p>${data.punchline}</p>`;
              jokeElement.classList.add("visible");
            }, 2500);
          })
          .catch((error) => console.error(error));
      }
      function apiRandom() {
        fetch("https://source.unsplash.com/random")
          .then((data) => {
            const randomPhotos = document.getElementById("randomPhoto");
            randomPhotos.innerHTML = `<img src='${data.url}'/>`;
            console.log(data);
          })
          .catch((error) => console.error(error));
      }
      function convertCurrency() {
        const currencyOne = document.getElementById("currency-one").value;
        const currencyTwo = document.getElementById("currency-two").value;
        const amountToConvert =
          document.getElementById("conversion-amount").value;

        if (!amountToConvert || isNaN(amountToConvert)) {
          console.log("Please enter a valid amount for conversion.");
          return;
        }

        fetch(`https://api.exchangerate-api.com/v4/latest/${currencyOne}`)
          .then((response) => response.json())
          .then((data) => {
            const exchangeRates = data.rates;
            console.log(`Exchange rates for ${currencyOne}:`, exchangeRates);

            if (currencyTwo && currencyOne !== currencyTwo) {
              const conversionRate = exchangeRates[currencyTwo];
              const convertedValue = amountToConvert * conversionRate;

              console.log(
                `Converted ${amountToConvert} ${currencyOne} to ${currencyTwo}:`,
                convertedValue
              );
              document.getElementById(
                "rate"
              ).innerText = `1 ${currencyOne} = ${conversionRate} ${currencyTwo}`;
            } else {
              console.log(
                "Invalid or same base currency provided for conversion"
              );
            }
          })
          .catch((error) => console.error(error));
      }

      async function fetchCryptoRates() {
        try {
          const response = await fetch(
            "https://api.coinbase.com/v2/exchange-rates?currency=BTC"
          );
          const { data } = await response.json();

          displayCryptoRates(data.rates);
        } catch (error) {
          console.error("Error fetching exchange rates:", error.message);
        }
      }

      function displayCryptoRates(rates) {
        const cryptoContainer = document.getElementById("cryptoRates");
        cryptoContainer.innerHTML = ""; // Clear existing content

        // Display rates for the first 10 cryptocurrencies
        let count = 0;
        for (const symbol in rates) {
          const rate = rates[symbol];
          const cryptoElement = document.createElement("p");
          cryptoElement.innerText = `${symbol}: ${parseFloat(rate).toFixed(3)}`;
          cryptoContainer.appendChild(cryptoElement);

          count++;
          if (count >= 15) {
            break;
          }
        }
      }
      fetchCryptoRates();
      setInterval(fetchCryptoRates, 3000);

      function submitForm() {
        const form = document.getElementById("NewTopic");
        fetch(
          "https://script.google.com/macros/s/AKfycbzwTWQgokm_Li0rqeF_X1jLJOcAgzLz22Z8T9FiTuAv3xhqEsP0CUVTNYg7Qx9-TfL1/exec",
          { method: "POST", body: new FormData(form) }
        )
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            document.getElementById("demo").innerHTML =
              "<div class='alert alert-primary' role='alert'><b>Thank You for providing the details, We shall get back to you shortly !</b></div>";
            form.reset();
          })
          .catch((error) => {
            console.error("Error!", error.message);
          });
      }

      function initialize() {
        fetchCryptoRates();
        setInterval(fetchCryptoRates, 3000);
      }

      initialize();
    </script>
  </body>
</html>
